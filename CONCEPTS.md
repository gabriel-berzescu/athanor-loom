# Core Concepts

This document explains the fundamental concepts behind Athanor Loom.

## The Tree Metaphor

Athanor Loom visualizes text generation as a tree growing upward from its root:

```
           [Node 5]  [Node 6]  [Node 7]
               \        |        /
                \       |       /
                 \      |      /
                  [  Node 3  ]     [Node 4]
                       \              /
                        \            /
                         \          /
                          [Node 1] [Node 2]
                               \   /
                                \ /
                            [ Root ]
```

- **Root**: The initial text you provide
- **Branches**: Alternative continuations sprouting upward
- **Leaves**: Endpoints where generation hasn't continued yet

The tree grows from bottom to top, like a natural tree.

## Nodes

A **node** is a unit of text in the tree. Each node contains:

- **Text content**: The generated (or edited) text
- **Unique ID**: For tracking and relationships
- **Parent reference**: Which node this continues from
- **Position**: Location in the tree structure

### The Root Node

The **root node** is special:
- You type it manually - it's your starting point
- It has no parent
- All other nodes descend from it
- The tree can only have one root

### Child Nodes

All other nodes are **children** of some parent:
- Generated by the language model
- Continue the text from their parent
- Can be edited after generation
- Can themselves have children

## Paths

A **path** is the sequence of nodes from root to any given node:

```
Root → Node 1 → Node 3 → Node 5
```

When you click a node in the tree, the left panel shows the complete text of that path, concatenated together. This is the "story so far" for that branch.

## Branching

**Branching** is creating multiple alternative continuations from a single node:

```
Before:                After generating 3 children:
[ Node 1 ]            [New A]  [New B]  [New C]
                           \      |      /
                            \     |     /
                             \    |    /
                             [ Node 1 ]
```

- You can generate 3, 5, or 7 children at once
- Each child is an independent alternative
- You can generate more children from any node, even if it already has children
- Branching is how you explore probability space

## Generation

**Generation** is when the language model creates new text:

1. You select a node (or start with root)
2. Click "Generate 3" (or 5, or 7)
3. The system sends the full path text to the model
4. The model continues the text multiple times
5. Each continuation becomes a new child node

### How Base Models Work

Base language models don't use a "messages" format with user/assistant roles. They just continue text:

- **Input**: Raw text string (the full path from root to parent)
- **Output**: Continuation of that text
- **No structure**: No system prompts, roles, or conversation format

This is why Athanor Loom works specifically with base models, not chat models.

## Editing

You can **edit** any node's text:

- Click to select the node
- Edit its text in the left panel
- Changes are saved immediately
- Children remain unchanged (they don't auto-update)

### Editing Consequences

When you edit a node that has children:
- The children stay as-is
- They were generated from the old text
- They might not make sense anymore
- You can delete them and regenerate if needed

## Pruning

**Pruning** is removing parts of the tree:

### Delete Node + Children
- Removes the selected node
- Removes all descendants (children, grandchildren, etc.)
- The parent remains

### Delete All Children
- Keeps the selected node
- Removes all descendants
- Useful before regenerating alternatives

## Navigation

You can explore the tree in multiple ways:

### Mouse/Touch
- **Click**: Select a node, show its path in left panel
- **Hover**: Preview just that node's text
- **Pan**: Drag the tree view around
- **Zoom**: Scroll to zoom in/out
- **Collapse/Expand**: Click +/- to collapse/expand branches

### Keyboard
- **Left/Right**: Navigate between sibling nodes
- **Up**: Move to a child node
- **Down**: Move to parent node

## Search

**Search** helps you find text within your tree:

1. Enter search term
2. Matching nodes highlight in the tree
3. Click a highlighted node
4. The matching text also highlights in the left panel

## Probability Space

The core idea of Athanor Loom is exploring **probability space**:

- Language models don't produce one "correct" answer
- They produce probability distributions over possible continuations
- By generating multiple samples, you explore this space
- You can see what directions the model considers likely
- You can curate the "best" paths through manual selection

## Curation

**Curation** is the deliberate process of shaping output:

1. **Generate**: Create multiple alternatives
2. **Evaluate**: Read and compare them
3. **Select**: Choose promising directions
4. **Branch**: Generate more from selected nodes
5. **Edit**: Manually refine when needed
6. **Prune**: Remove less interesting branches
7. **Repeat**: Iteratively build your curated output

This is slow, deliberate work - the opposite of "generate once and accept."

## State Preservation

Your trees are saved as JSON files:

- **One file per tree**
- Saved to your local filesystem
- Contains complete structure and all text
- Can be loaded later to continue work
- Portable between machines

## Why This Approach?

Traditional interfaces show you one path:
```
User → Assistant → User → Assistant
```

Athanor Loom shows you a tree of possibilities:
```
                [Path A continues]
               /
[User prompt] → [Path B continues] → [B.1] [B.2] [B.3]
               \
                [Path C continues]
```

This lets you:
- See what's probable vs improbable
- Compare alternatives side-by-side
- Combine the best parts of different branches
- Understand model behavior more deeply
- Create outputs you couldn't get in one shot
